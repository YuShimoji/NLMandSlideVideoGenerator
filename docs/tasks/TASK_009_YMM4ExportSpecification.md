# Task: YMM4エクスポート仕様策定
Status: OPEN
Tier: 1
Branch: master
Owner: Worker
Created: 2026-02-02T03:59:00Z
Report: 

## Objective
- YMM4（ゆっくりムービーメーカー4）へのエクスポート仕様を策定し、CSV タイムラインとの対応関係を明確化する
- プラグイン実装（TASK_007）の前提となる仕様ドキュメントを作成する

## Context
- CSV タイムラインは既に実装済み（長尺行の自動分割機能も完了）
- YMM4プラグインのスケルトンは存在するが、具体的なエクスポート仕様が未定
- YMM4 API Docs: https://ymm-api-docs.vercel.app/

## Focus Area
- **データマッピング仕様**
  - CSV カラム（timestamp, duration, text, audio_path等）とYMM4オブジェクト（音声アイテム、字幕アイテム）の対応
  - レイヤー構成（音声レイヤー、字幕レイヤー、画像レイヤー等）
  - タイムライン上の配置ルール（開始時刻、終了時刻、オーバーラップ処理）
- **エクスポートフォーマット**
  - YMM4プロジェクトファイル（.ymmp）の生成方法
  - プラグイン経由でのインポート仕様（APIコール順序、パラメータ）
  - ファイルパスの扱い（絶対パス/相対パス、存在チェック）
- **エラーハンドリング**
  - 音声ファイルが見つからない場合の処理
  - 長尺テキストの分割とレイヤー配置
  - 重複タイムスタンプの扱い

## Forbidden Area
- YMM4本体の機能変更や拡張を前提とした仕様
- 既存のCSV生成フローへの破壊的変更

## Constraints
- YMM4 API仕様に準拠すること
- CSV タイムラインの現行仕様（`SLIDES_SETTINGS`）との互換性を維持
- 手動でのYMM4編集も可能な状態を維持（プラグイン依存を最小化）

## DoD
- [ ] エクスポート仕様書を `docs/specs/ymm4_export_spec.md` として作成
- [ ] データマッピング表（CSV ↔ YMM4）を含む
- [ ] エクスポートフロー図（mermaidまたは図版）を含む
- [ ] エラーハンドリング方針を明記
- [ ] TASK_007（プラグイン実装）の実装ガイドとして機能する内容
- [ ] レビュー済み（オーナー確認）

## Notes
- 仕様策定後、TASK_007の実装に着手する
- YMM4 APIサンプルを参考にしながら、実装可能性を検証すること
