# Task: SofTalk連携実装
Status: OPEN
Tier: 2
Branch: feature/softalk-integration
Owner: Worker
Created: 2026-02-02T03:59:00Z
Report: 

## Objective
- SofTalk（音声合成ソフト）との連携を実装し、CSV タイムラインから自動的に音声ファイルを生成できるようにする
- コマンドライン経由での制御を基本とし、バッチ処理に対応する

## Context
- 現在の音声生成は手動または別途実装が必要
- SofTalkはコマンドライン引数で音声合成が可能
- CSV タイムラインには既にテキストとタイミング情報が含まれている

## Focus Area
- **SofTalk実行可能ファイルの検出**
  - 環境変数またはconfigで指定可能にする
  - デフォルトパスをサポート（インストール先検出）
- **音声生成バッチ処理**
  - CSV タイムラインの各行からSofTalkコマンドを生成
  - 音声ファイル（WAV）を指定ディレクトリに出力
  - エラーハンドリングとリトライ機構
- **既存パイプラインへの統合**
  - `run_csv_timeline` または新規サブコマンドとして実装
  - 生成済み音声ファイルのスキップ機能（再生成不要）

## Forbidden Area
- SofTalk本体のインストールを必須にする（オプション機能として提供）
- 既存の CSV 生成・スライド生成フローの挙動変更

## Constraints
- SofTalkがインストールされていない環境でもエラーにならない
- 音声ファイル名はCSVの行番号やタイムスタンプから一意に生成
- 設定ファイル（YAML/JSON）で音声パラメータ（話速、音量等）を指定可能

## DoD
- [ ] SofTalk実行ファイルパスの設定機能
- [ ] CSV タイムラインから音声ファイル一括生成
- [ ] 生成済みファイルのスキップ機能
- [ ] エラーハンドリングとログ出力
- [ ] pytestテストケース追加
- [ ] README.md にセットアップと使用方法を記載

## Notes
- 将来的には他の音声合成エンジン（VOICEVOX等）にも対応できるよう、抽象化を検討
- 音声ファイルの命名規則は既存のYMM4連携と整合性を保つ
